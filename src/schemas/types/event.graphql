type Event {
  id: ID!
  title: String!
  description: String
  start: DateTime!
  end: DateTime!
  allDay: Boolean!
  color: String!
  location: String
  type: EventType!
  invoiceId: ID
  invoice: Invoice
  userId: ID!
  emailReminder: EmailReminder
  source: EventSource
  visibility: EventVisibility
  isReadOnly: Boolean
  externalEventId: String
  externalCalendarLinks: [ExternalCalendarLink]
  createdAt: DateTime!
  updatedAt: DateTime!
}

enum EventColor {
  sky
  amber
  orange
  emerald
  violet
  rose
  blue
  green
  red
  purple
  pink
  yellow
}

enum EventType {
  MANUAL
  INVOICE_DUE
  MEETING
  DEADLINE
  REMINDER
  CREDIT_NOTE_CREATED
  EXTERNAL
}

enum EventSource {
  newbi
  google
  microsoft
  apple
}

enum EventVisibility {
  workspace
  private
}

input CreateEventInput {
  title: String!
  description: String
  start: DateTime!
  end: DateTime!
  allDay: Boolean = false
  color: String = "sky"
  location: String
  type: EventType = MANUAL
  emailReminder: EmailReminderInput
}

input UpdateEventInput {
  id: ID!
  title: String
  description: String
  start: DateTime
  end: DateTime
  allDay: Boolean
  color: String
  location: String
  type: EventType
  emailReminder: EmailReminderInput
}

type EventsResponse {
  success: Boolean!
  message: String
  events: [Event!]
  totalCount: Int
}

type EventResponse {
  success: Boolean!
  message: String
  event: Event
}

extend type Query {
  getEvents(
    startDate: DateTime
    endDate: DateTime
    type: EventType
    limit: Int = 500
    offset: Int = 0
    workspaceId: ID
    includeExternalCalendars: Boolean = false
    sources: [EventSource]
  ): EventsResponse!

  getEvent(id: ID!, workspaceId: ID): EventResponse!
}

extend type Mutation {
  createEvent(input: CreateEventInput!, workspaceId: ID): EventResponse!
  updateEvent(input: UpdateEventInput!, workspaceId: ID): EventResponse!
  deleteEvent(id: ID!, workspaceId: ID): EventResponse!

  # Synchroniser les événements avec les factures
  syncInvoiceEvents(workspaceId: ID): EventsResponse!
}
