type Address {
  fullName: String
  street: String!
  city: String!
  postalCode: String!
  country: String!
}

input AddressInput {
  fullName: String
  street: String!
  city: String!
  postalCode: String!
  country: String!
}

type ClientNote {
  id: ID!
  content: String!
  userId: ID!
  userName: String
  userImage: String
  createdAt: String!
  updatedAt: String!
}

type ClientActivity {
  id: ID!
  type: String!
  description: String
  field: String
  oldValue: String
  newValue: String
  userId: ID
  userName: String
  userImage: String
  createdAt: String!
  metadata: ClientActivityMetadata
}

type ClientActivityMetadata {
  documentType: String
  documentId: String
  documentNumber: String
  status: String
  originalInvoiceNumber: String
  eventId: String
  eventTitle: String
  eventDate: String
}

type ClientCustomFieldValueType {
  fieldId: ID!
  value: JSON
}

type ClientContact {
  id: ID!
  position: String
  firstName: String
  lastName: String
  email: String
  phone: String
  isPrimary: Boolean
  createdAt: String
}

type Client {
  id: ID!
  name: String!
  email: String!
  address: Address!
  type: ClientType!
  # Champs spécifiques aux entreprises
  siret: String
  vatNumber: String
  # Indique si l'entreprise est hors France
  isInternational: Boolean
  # Champs spécifiques aux particuliers
  firstName: String
  lastName: String
  # Adresse de livraison différente
  hasDifferentShippingAddress: Boolean
  shippingAddress: Address
  # Contacts additionnels
  contacts: [ClientContact!]
  # Champs personnalisés
  customFields: [ClientCustomFieldValueType!]
  # Membres assignés
  assignedMembers: [String!]
  # Blocage
  isBlocked: Boolean
  blockedAt: String
  blockedReason: String
  # Timeline d'activité
  notes: [ClientNote!]
  activity: [ClientActivity!]
  # Métadonnées
  createdBy: ID!
  createdAt: String!
  updatedAt: String!
}

# Client embarqué dans les documents (factures, devis, avoirs)
# L'id peut être null pour les anciens documents sans client.id
type EmbeddedClient {
  id: ID
  name: String!
  email: String!
  address: Address!
  type: ClientType!
  # Champs spécifiques aux entreprises
  siret: String
  vatNumber: String
  # Indique si l'entreprise est hors France
  isInternational: Boolean
  # Champs spécifiques aux particuliers
  firstName: String
  lastName: String
  # Adresse de livraison différente
  hasDifferentShippingAddress: Boolean
  shippingAddress: Address
}

input ClientContactInput {
  id: ID
  position: String
  firstName: String
  lastName: String
  email: String
  phone: String
  isPrimary: Boolean
}

input ClientInput {
  id: ID
  name: String!
  email: String!
  address: AddressInput!
  type: ClientType!
  # Champs spécifiques aux entreprises
  siret: String
  vatNumber: String
  # Indique si l'entreprise est hors France
  isInternational: Boolean
  # Champs spécifiques aux particuliers
  firstName: String
  lastName: String
  # Contacts additionnels
  contacts: [ClientContactInput!]
}

enum ClientType {
  INDIVIDUAL
  COMPANY
}

enum DiscountType {
  FIXED
  PERCENTAGE
}

type Item {
  description: String!
  quantity: Float!
  unitPrice: Float!
  vatRate: Float!
  unit: String!
  discount: Float
  discountType: DiscountType
  details: String
  progressPercentage: Float
}

input ItemInput {
  description: String!
  quantity: Float!
  unitPrice: Float!
  vatRate: Float!
  unit: String!
  discount: Float
  discountType: DiscountType
  details: String
  progressPercentage: Float
}

type Shipping {
  billShipping: Boolean!
  shippingAddress: Address
  shippingAmountHT: Float!
  shippingVatRate: Float!
}

input ShippingInput {
  billShipping: Boolean!
  shippingAddress: AddressInput
  shippingAmountHT: Float!
  shippingVatRate: Float!
}
