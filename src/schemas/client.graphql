# Importe les types communs
# Note: GraphQL n'a pas de directive d'importation native, 
# mais la fusion des schémas gère cela pour nous

extend type Query {
  # Get a single client by ID
  client(workspaceId: String, id: ID!): Client!
  
  # Get all clients for the current user's company with pagination
  clients(workspaceId: String, page: Int, limit: Int, search: String): ClientsResult!
}

# Type pour les résultats paginés des clients
type ClientsResult {
  items: [Client!]!
  totalItems: Int!
  currentPage: Int!
  totalPages: Int!
}

input ClientNoteInput {
  content: String!
}

input ClientActivityInput {
  type: String!
  description: String!
  metadata: ClientActivityMetadataInput
}

input ClientActivityMetadataInput {
  eventId: String
  eventTitle: String
  eventDate: String
}

extend type Mutation {
  # Create a new client
  createClient(workspaceId: String, input: ClientInput!): Client!
  
  # Update an existing client
  updateClient(workspaceId: String, id: ID!, input: ClientInput!): Client!
  
  # Delete a client
  deleteClient(workspaceId: String, id: ID!): Boolean!
  
  # Add a note to a client
  addClientNote(workspaceId: String, clientId: ID!, input: ClientNoteInput!): Client!
  
  # Update a client note
  updateClientNote(workspaceId: String, clientId: ID!, noteId: ID!, content: String!): Client!
  
  # Delete a client note
  deleteClientNote(workspaceId: String, clientId: ID!, noteId: ID!): Client!

  # Add an activity entry to a client
  addClientActivity(workspaceId: String, clientId: ID!, input: ClientActivityInput!): Client!

  # Assign members to a client
  assignClientMembers(workspaceId: String, id: ID!, memberIds: [String!]!): Client!

  # Block a client
  blockClient(workspaceId: String, id: ID!, reason: String): Client!

  # Unblock a client
  unblockClient(workspaceId: String, id: ID!): Client!
}